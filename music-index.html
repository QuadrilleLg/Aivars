<!DOCTYPE html>
<html lang="lv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice Assistant</title>
    <link rel="stylesheet" href="music-style.css">
</head>
<body>
    <!-- MOBILE HAMBURGER MENU -->
    <div class="menu-toggle" id="menuToggle">
        <span></span>
        <span></span>
        <span></span>
    </div>
    
    <!-- MOBILE OVERLAY -->
    <div class="menu-overlay" id="menuOverlay"></div>

    <!-- STÅªRA ORNAMENTI -->
    <div class="corner-top-left"></div>
    <div class="corner-top-right"></div>
    <div class="corner-bottom-left"></div>
    <div class="corner-bottom-right"></div>

    <div class="main-container">
        <!-- Song list on the left side -->
        <div class="song-list-container">
            <h3>PieejamÄs dziesmas</h3>
            <ul id="songList" class="song-list">
                <!-- Songs will be populated by JavaScript -->
            </ul>
        </div>

        <!-- Active song and fragments in the middle -->
        <div class="audio-player-container">
            <div class="active-song-panel">
                <h3 id="activeSongTitle">IzvÄ“lieties dziesmu</h3>
                <div class="player-controls">
                    <span class="control-btn" id="playPauseBtn">â–¶ï¸</span>
                    <span class="control-btn" id="stopBtn">â¹ï¸</span>
                    <span class="control-btn video-btn" id="videoBtn">ğŸ¬ VIDEO</span>
                </div>
                <div class="progress-container">
                    <div id="progressBar" class="progress-bar"></div>
                </div>
                <div id="songTimer" class="song-timer">00:00 / 00:00</div>
            </div>

            <div class="fragments-container">
                <h3>Pieejamie fragmenti</h3>
                <div id="fragmentsList" class="fragments-list">
                    <!-- Fragments will be populated by JavaScript -->
                </div>
            </div>

            <!-- Audio element (hidden) -->
            <audio id="mainAudio"></audio>
        </div>

        <!-- VIDEO POPUP MODAL -->
        <div id="videoModal" class="video-modal">
            <div class="video-modal-content">
                <div class="video-header">
                    <h2>Video AtskaÅ†otÄjs</h2>
                    <span class="close-video" id="closeVideo">&times;</span>
                </div>
                
                <div class="video-container">
                    <video id="videoPlayer" controls>
                        <source src="" type="video/mp4">
                        JÅ«su pÄrlÅ«kprogramma neatbalsta video.
                    </video>
                </div>
                
                <div class="video-info">
                    <h3 id="currentVideoTitle">IzvÄ“lieties video</h3>
                    <div class="video-timer" id="videoTimer">00:00 / 00:00</div>
                </div>
                
                <div class="video-fragments">
                    <h3>Video Fragmenti</h3>
                    <div id="videoFragmentsList" class="video-fragments-list">
                        <!-- Video fragments will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Right side control panel -->
        <div class="control-panel">
            <div class="header">
                <div class="profile-icon">
                    <div class="folk-pattern"></div>
                </div>
                <div class="title">Aivars - mÅ«zikas asistents</div>
                <div class="menu-icon">â‹®</div>
            </div>

            <div class="visualization">
                <div class="clock">
                    <div class="clock-center"></div>
                    <div class="hour-hand"></div>
                    <div class="minute-hand"></div>
                    <div class="second-hand"></div>
                    <div class="time-marks" style="--rotation: 0deg"></div>
                    <div class="time-marks" style="--rotation: 30deg"></div>
                    <div class="time-marks" style="--rotation: 60deg"></div>
                    <div class="time-marks" style="--rotation: 90deg"></div>
                    <div class="time-marks" style="--rotation: 120deg"></div>
                    <div class="time-marks" style="--rotation: 150deg"></div>
                    <div class="time-marks" style="--rotation: 180deg"></div>
                    <div class="time-marks" style="--rotation: 210deg"></div>
                    <div class="time-marks" style="--rotation: 240deg"></div>
                    <div class="time-marks" style="--rotation: 270deg"></div>
                    <div class="time-marks" style="--rotation: 300deg"></div>
                    <div class="time-marks" style="--rotation: 330deg"></div>
                </div>
                <div id="systemMonitor" class="system-monitor"></div>
            </div>

            <div id="statusText" class="status">
                Gaidu aktivizÄciju...
            </div>

            <div class="logs">
                <div class="tab-container">
                    <div class="tab active">Sarunas logs</div>
                    <div class="tab">SistÄ“mas logs</div>
                </div>
                <div id="chatLog" class="log">
                    <div class="date-separator">VadÄ«bas instrukcija</div>
                    <div class="message-group assistant">
                        <div class="avatar">
                            <div class="folk-pattern"></div>
                        </div>
                        <div class="message">Lai sÄktu aktivizÄ“jiet mikrafonu</div>
                        <div class="time">----------</div>
                    </div>
                    <div class="message-group user">
                        <div class="message">Sakiet aktivizÄcijas vÄrdu "Aivar"</div>
                        <div class="time">----------</div>
                        <div class="avatar user-avatar"></div>
                    </div>
                    <div class="message-group user">
                        <div class="message">Nosauciet vÄ“lamo dziesmu no saraksta</div>
                        <div class="time">----------</div>
                        <div class="avatar user-avatar"></div>
                    </div>
                </div>
                <div id="systemLog" class="log" style="display: none;"></div>
            </div>

            <div class="input-section">
                <select id="audioDeviceSelect" class="audio-device-select"></select>
                <span class="mic-btn">ğŸ¤</span>
                <input type="text" id="textInput" class="text-input" placeholder="Rakstiet Å¡eit...">
                <span class="stop-btn">Stop</span>
                <span class="send-btn">SÅ«tÄ«t</span>
            </div>
        </div>
    </div>
    
    <script type="module" src="main.js"></script>
    <script src="video.js"></script>
    
    <!-- MOBILE MENU SCRIPT - FIXED -->
    <script>
        const menuToggle = document.getElementById('menuToggle');
        const menuOverlay = document.getElementById('menuOverlay');
        const songListContainer = document.querySelector('.song-list-container');

        function toggleMenu() {
            menuToggle.classList.toggle('active');
            menuOverlay.classList.toggle('active');
            songListContainer.classList.toggle('active');
        }

        // TIKAI hamburger poga atver/aizver
        menuToggle.addEventListener('click', toggleMenu);
        
        // NOÅ…EMTS: menuOverlay.addEventListener('click', toggleMenu);
        // Overlay vairs neaizver izvÄ“lni - tikai hamburger poga

        // Swipe gestures
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', function(e) {
            touchStartX = e.changedTouches[0].screenX;
        }, { passive: true });

        document.addEventListener('touchend', function(e) {
            touchEndX = e.changedTouches[0].screenX;
            const swipeDistance = touchEndX - touchStartX;
            
            // Swipe right from left edge - atver
            if (touchStartX < 50 && swipeDistance > 100 && !songListContainer.classList.contains('active')) {
                toggleMenu();
            }
            
            // Swipe left - aizver
            if (swipeDistance < -100 && songListContainer.classList.contains('active')) {
                toggleMenu();
            }
        }, { passive: true });
    </script>
</body>
</html>
